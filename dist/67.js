"use strict";(self.webpackChunknovelsynth=self.webpackChunknovelsynth||[]).push([[67],{67:(e,t,n)=>{n.d(t,{ContentDetector:()=>c});class c{static MIN_WORD_COUNT=500;static WORDS_PER_MINUTE=200;static analyzeContent(e){const t=window.location.href,n=window.location.hostname,c=e.find((e=>e.isEnabled&&e.domains.some((e=>n.includes(e)))));let o="",s="",i="";c?(o=this.extractTextFromSelector(c.selectors.content||"body"),s=this.extractTextFromSelector(c.selectors.title||"title"),i=this.extractTextFromSelector(c.selectors.author||"")):(o=this.extractGenericContent(),s=document.title);const r=this.countWords(o),l=Math.ceil(r/this.WORDS_PER_MINUTE),a=r>=this.MIN_WORD_COUNT,d=this.detectContentType(t,o,s);return{isLongForm:a,contentType:d,wordCount:r,readingTime:l,title:s||void 0,author:i||void 0,confidence:this.calculateConfidence(c,r,d)}}static extractTextFromSelector(e){if(!e)return"";const t=document.querySelectorAll(e);return Array.from(t).map((e=>e.textContent?.trim()||"")).join(" ").replace(/\s+/g," ")}static extractGenericContent(){const e=document.cloneNode(!0);e.querySelectorAll("script, style, nav, header, footer, aside, .advertisement, .ads").forEach((e=>e.remove()));const t=["main","article",".content",".post-content",".article-content",".entry-content","#content",".chapter-content",".story-content"];for(const n of t){const t=e.querySelector(n);if(t&&t.textContent&&t.textContent.length>1e3)return t.textContent.trim().replace(/\s+/g," ")}return e.body?.textContent?.trim().replace(/\s+/g," ")||""}static countWords(e){return e.split(/\s+/).filter((e=>e.length>0)).length}static detectContentType(e,t,n){const c=e.toLowerCase(),o=n.toLowerCase(),s=t.toLowerCase();return c.includes("novel")||c.includes("chapter")||c.includes("fanfiction")||c.includes("webnovel")||o.includes("chapter")||/chapter\s+\d+/i.test(n)?"novel":c.includes("news")||c.includes("article")||/\d{4}\/\d{2}\/\d{2}/.test(e)||s.includes("breaking news")||s.includes("reuters")||s.includes("associated press")?"news":c.includes("docs")||c.includes("documentation")||c.includes("api")||c.includes("guide")||o.includes("documentation")?"technical":c.includes("blog")||c.includes("post")||s.includes("posted by")||s.includes("written by")||c.includes("tutorial")||c.includes("howto")||c.includes("guide")||o.includes("how to")||o.includes("tutorial")?"article":"generic"}static calculateConfidence(e,t,n){let c=.5;return e&&(c+=.3),t>2e3?c+=.2:t>1e3&&(c+=.1),"generic"!==n&&(c+=.2),Math.min(c,1)}}}}]);
//# sourceMappingURL=67.js.map