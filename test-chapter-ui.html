<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chapter 1: The Beginning - Test Novel</title>
    <style>
      body {
        font-family: "Georgia", serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        line-height: 1.6;
        background-color: #f8f9fa;
      }
      .chapter-content {
        background: white;
        padding: 40px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #333;
        border-bottom: 2px solid #667eea;
        padding-bottom: 10px;
      }
      p {
        margin-bottom: 1.2em;
        text-align: justify;
      }
    </style>
  </head>
  <body>
    <div class="chapter-content">
      <h1>Chapter 1: The Beginning</h1>

      <p>
        In the heart of the mystical kingdom of Eldoria, where magic flowed
        through the very air like a gentle breeze, there lived a young
        apprentice named Aria. She had always been different from the other
        children in her village, possessing an unusual affinity for the ancient
        arts that most people could only dream of mastering.
      </p>

      <p>
        The morning sun cast long shadows across the cobblestone streets as Aria
        made her way to the Great Library, her worn leather satchel bouncing
        against her hip with each hurried step. Today was the day she would
        finally be allowed to access the restricted section, where the most
        powerful and dangerous spells were kept under lock and key.
      </p>

      <p>
        Master Eldwin, her mentor and the kingdom's most respected wizard, had
        spent months preparing her for this moment. "Magic," he had told her
        countless times, "is not about power, but about understanding. The
        greatest wizards are not those who can cast the most devastating spells,
        but those who know when not to cast them at all."
      </p>

      <p>
        As she approached the towering marble steps of the library, Aria felt a
        strange tingling in her fingertips‚Äîa sensation she had been experiencing
        more frequently in recent weeks. Unknown to her, this was the first sign
        that her true powers were beginning to awaken, powers that would soon
        change the fate of the entire kingdom.
      </p>

      <p>
        The ancient doors of the library creaked open with a sound like thunder,
        and Aria stepped into a world of knowledge that had been accumulating
        for over a thousand years. Dusty tomes lined the walls from floor to
        ceiling, their leather bindings worn smooth by countless hands seeking
        wisdom and power.
      </p>

      <p>
        But today, something was different. The usually bustling library was
        eerily quiet, and even the ever-present librarian, Mrs. Thornberry, was
        nowhere to be seen. A chill ran down Aria's spine as she realized that
        she might not be alone in the building after all.
      </p>

      <p>
        Deep in the shadows between the towering bookshelves, something
        stirred‚Äîsomething that had been waiting for exactly this moment, when a
        young apprentice with untapped potential would finally cross the
        threshold into the realm of true magic. The adventure that would define
        Aria's destiny was about to begin.
      </p>
    </div>

    <!-- This script simulates the NovelSynth extension loading -->
    <script>
      console.log("Chapter UI test page loaded");

      // Simulate the extension detecting this as a chapter page
      document.addEventListener("DOMContentLoaded", function () {
        // Check if extension is loaded
        if (
          typeof chrome !== "undefined" &&
          chrome.runtime &&
          chrome.runtime.id
        ) {
          console.log("Extension context detected");
        } else {
          console.log("No extension context - testing standalone");

          // Create a mock chapter enhancement UI for testing
          setTimeout(() => {
            createMockChapterUI();
          }, 1000);
        }
      });

      function createMockChapterUI() {
        const insertionPoint = document.querySelector(".chapter-content");
        if (!insertionPoint) return;

        const ui = document.createElement("div");
        ui.className = "novelsynth-chapter-ui";
        ui.innerHTML = `
                <div class="novelsynth-enhancement-bar">
                    <div class="novelsynth-primary-actions">
                        <button class="novelsynth-action-btn primary" data-action="enhance">
                            <span class="icon">‚ú®</span>
                            <span class="label">Enhance</span>
                        </button>
                        <button class="novelsynth-action-btn primary" data-action="summarize">
                            <span class="icon">üìÑ</span>
                            <span class="label">Summarize</span>
                        </button>
                    </div>
                    <div class="novelsynth-dropdown-container">
                        <button class="novelsynth-dropdown-btn" type="button">
                            <span class="icon">‚öôÔ∏è</span>
                            <span class="label">More Actions</span>
                            <span class="chevron">‚ñº</span>
                        </button>
                        <div class="novelsynth-dropdown-menu" style="display: none;">
                            <button class="novelsynth-dropdown-item" data-action="analyze">
                                <span class="icon">üîç</span>
                                <span class="label">Analyze</span>
                                <span class="description">Analyze themes and writing style</span>
                            </button>
                            <button class="novelsynth-dropdown-item" data-action="suggestions">
                                <span class="icon">üí°</span>
                                <span class="label">Suggestions</span>
                                <span class="description">Get improvement suggestions</span>
                            </button>
                            <button class="novelsynth-dropdown-item" data-action="translate">
                                <span class="icon">üåê</span>
                                <span class="label">Translate</span>
                                <span class="description">Translate to different language</span>
                            </button>
                        </div>
                    </div>
                </div>
            `;

        // Insert before the content
        insertionPoint.parentElement.insertBefore(ui, insertionPoint);

        // Add basic functionality
        const dropdown = ui.querySelector(".novelsynth-dropdown-btn");
        const menu = ui.querySelector(".novelsynth-dropdown-menu");

        dropdown.addEventListener("click", function () {
          const isVisible = menu.style.display !== "none";
          menu.style.display = isVisible ? "none" : "block";
        });

        // Add click handlers for buttons
        ui.querySelectorAll("[data-action]").forEach((btn) => {
          btn.addEventListener("click", function () {
            const action = this.getAttribute("data-action");
            console.log("Action clicked:", action);
            alert(`Testing: ${action} action clicked!`);
          });
        });

        console.log("Mock Chapter Enhancement UI created");
      }
    </script>
    <!-- Load the extension's CSS for styling -->
    <link rel="stylesheet" href="dist/content.css" />
  </body>
</html>
